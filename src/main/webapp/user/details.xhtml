<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:bookstore="http://dukesbookstore"
                template="/WEB-INF/templates/user.template.xhtml"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:jsf="http://xmlns.jcp.org/jsf"
                xmlns:v-on="http://www.vue.com"
                xmlns:v-bind="http://www.vue.com"
                xmlns:v-show="http://www.vue.com">

    <ui:define name="top"></ui:define> 
    <ui:define name="content">
        <div class="container register-form-container" >
            <div class="row">
                <div class="col-md-8">

					<div class="col-sm-8 col-sm-offset-3">
						<c:if test="#{param['success'] == 'true'}">
							<div class="alert alert-success">
								<strong>Successfully changed password.</strong>
							</div>
						</c:if>
					</div>
                    <!-- FORM CONTENT -->
					<h:form class="form-horizontal">
						<!-- name -->
						<div class="form-group has-feedback">
							<label for="firstname" class="col-sm-3 control-label"> First Name:</label>
							<div class="col-sm-8">
								<h:inputText value="#{memberSession.user.firstName}" required="true" class="form-control">
									<f:passThroughAttribute name="type" value="text" />
									<f:passThroughAttribute name="v-model" value="firstname" />
									<f:passThroughAttribute name="v-on:keyup" value="showFirstnameFeedback" />
									<f:passThroughAttribute name="placeholder" value="First Name" />
								</h:inputText>
								<span class="form-control-feedback"><i v-bind:class='firstnameFeedback' aria-hidden="true"></i></span>
							</div>
						</div>
						<div class="form-group has-feedback">
							<label for="lastname" class="col-sm-3 control-label">Last name:</label>
							<div class="col-sm-8">
								<h:inputText value="#{memberSession.user.surname}" required="true" class="form-control">
									<f:passThroughAttribute name="type" value="text" />
									<f:passThroughAttribute name="v-model" value="lastname" />
									<f:passThroughAttribute name="v-on:keyup" value="showLastnameFeedback" />
									<f:passThroughAttribute name="placeholder" value="Last Name" />
								</h:inputText>
								<span class="form-control-feedback"><i v-bind:class='lastnameFeedback' aria-hidden="true"></i></span>
							</div>
						</div>
						<!-- email -->
						<div class="form-group has-feedback">
							<label for="email" class="col-sm-3 control-label">Email:</label>
							<div class="col-sm-8">
								<h:inputText id="email" value="#{memberSession.newEmail}" required="true" class="form-control">
									<f:passThroughAttribute name="type" value="email" />
									<f:passThroughAttribute name="v-model" value="email" />
									<f:passThroughAttribute name="v-on:keyup" value="showEmailFeedback" />
									<f:passThroughAttribute name="placeholder" value="name@example.com" />
									<f:ajax delay="300" render="emailExists" execute="email" event="keyup" listener="#{memberSession.generateEmailExistsError()}" />

								</h:inputText>
								<span class="form-control-feedback"><i v-bind:class='emailFeedback' aria-hidden="true"></i></span>
								<h:outputText id="emailExists" styleClass="col-sm-8 text-danger" value="#{memberSession.emailErrorMessage}"></h:outputText>
							</div>
						</div>





						<hr />  <!-- - - - - - - -->
						<!-- address -->
						<div class="form-group has-feedback">
							<label for="shippingAddressLine1" class="col-sm-3 control-label">Shipping Address:</label>
							<div class="col-sm-8">
								<h:inputText value="#{memberSession.user.shippingAddressLine1}" required="true" class="form-control">
									<f:passThroughAttribute name="type" value="text" />
									<f:passThroughAttribute name="v-model" value="shippingAddressLine1" />
									<f:passThroughAttribute name="v-on:keyup" value="showShippingAddressLine1Feedback" />
									<f:passThroughAttribute name="placeholder" value="Address Line 1" />
								</h:inputText>
								<span class="form-control-feedback"><i v-bind:class="shippingAddressLine1Feedback" aria-hidden="true"></i></span>
							</div>
						</div>
						<div class="form-group has-feedback">
							<label for="shippingAddressLine2" class="col-sm-3 control-label"></label>
							<div class="col-sm-8">
								<h:inputText value="#{memberSession.user.shippingAddressLine2}" required="false" class="form-control">
									<f:passThroughAttribute name="type" value="text" />
									<f:passThroughAttribute name="v-model" value="shippingAddressLine2" />
									<f:passThroughAttribute name="v-on:keyup" value="showShippingAddressLine2Feedback" />
									<f:passThroughAttribute name="placeholder" value="Address Line 2" />
								</h:inputText>
								<span class="form-control-feedback"><i v-bind:class="shippingAddressLine2Feedback" aria-hidden="true"></i></span>
							</div>
						</div>
						<div class="form-group has-feedback">
							<label for="shippingCity" class="col-sm-3 control-label"></label>
							<div class="col-sm-8">
								<h:inputText value="#{memberSession.user.shippingCity}" required="true" class="form-control">
									<f:passThroughAttribute name="type" value="text" />
									<f:passThroughAttribute name="v-model" value="shippingCity" />
									<f:passThroughAttribute name="v-on:keyup" value="showShippingCityFeedback" />
									<f:passThroughAttribute name="placeholder" value="City" />
								</h:inputText>
								<span class="form-control-feedback"><i v-bind:class="shippingCityFeedback" ></i></span>
							</div>
						</div>
						<div class="form-group has-feedback">
							<label for="shippingState" class="col-sm-3 control-label"></label>
							<div class="col-sm-8">
								<h:inputText value="#{memberSession.user.shippingState}" required="true" class="form-control">
									<f:passThroughAttribute name="type" value="text" />
									<f:passThroughAttribute name="v-model" value="shippingState" />
									<f:passThroughAttribute name="v-on:keyup" value="showShippingStateFeedback" />
									<f:passThroughAttribute name="placeholder" value="State" />
								</h:inputText>
								<span class="form-control-feedback"><i v-bind:class="shippingStateFeedback"></i></span>
							</div>
						</div>
						<div class="form-group has-feedback">
							<label for="shippingPostcode" class="col-sm-3 control-label"></label>
							<div class="col-sm-8">
								<h:inputText value="#{memberSession.user.shippingPostcode}" required="true" class="form-control">
									<f:passThroughAttribute name="type" value="text" />
									<f:passThroughAttribute name="v-model" value="shippingPostcode" />
									<f:passThroughAttribute name="v-on:keyup" value="showShippingPostcodeFeedback" />
									<f:passThroughAttribute name="placeholder" value="Postcode" />
								</h:inputText>
								<span class="form-control-feedback"><i v-bind:class="shippingPostcodeFeedback" aria-hidden="true"></i></span>
							</div>
						</div>



						<!-- Different shipping address -->
						<!-- address -->
						<hr />
						<div class="form-group has-feedback">
							<label for="billingAddressLine1" class="col-sm-3 control-label">Billing Address:</label>
							<div class="col-sm-8">
								<h:inputText value="#{memberSession.user.billingAddressLine1}" required="false" class="form-control">
									<f:passThroughAttribute name="type" value="text" />
									<f:passThroughAttribute name="v-model" value="billingAddressLine1" />
									<f:passThroughAttribute name="v-on:keyup" value="showBillingAddressLine1Feedback" />
									<f:passThroughAttribute name="placeholder" value="Address Line 1" />
								</h:inputText>
								<span class="form-control-feedback"><i v-bind:class="billingAddressLine1Feedback" aria-hidden="true"></i></span>
							</div>
						</div>
						<div class="form-group has-feedback">
							<label for="billingAddressLine2" class="col-sm-3 control-label"></label>
							<div class="col-sm-8">
								<h:inputText value="#{memberSession.user.billingAddressLine2}" required="false" class="form-control">
									<f:passThroughAttribute name="type" value="text" />
									<f:passThroughAttribute name="v-model" value="billingAddressLine2" />
									<f:passThroughAttribute name="v-on:keyup" value="showBillingAddressLine2Feedback" />
									<f:passThroughAttribute name="placeholder" value="Address Line 2" />
								</h:inputText>
								<span class="form-control-feedback"><i v-bind:class="billingAddressLine2Feedback" aria-hidden="true"></i></span>
							</div>
						</div>
						<div class="form-group has-feedback">
							<label for="billingCity" class="col-sm-3 control-label"></label>
							<div class="col-sm-8">
								<h:inputText value="#{memberSession.user.billingCity}" required="false" class="form-control">
									<f:passThroughAttribute name="type" value="text" />
									<f:passThroughAttribute name="v-model" value="billingCity" />
									<f:passThroughAttribute name="v-on:keyup" value="showBillingCity1Feedback" />
									<f:passThroughAttribute name="placeholder" value="City" />
								</h:inputText>
								<span class="form-control-feedback"><i v-bind:class="billingCityFeedback" aria-hidden="true"></i></span>
							</div>
						</div>
						<div class="form-group has-feedback">
							<label for="billingState" class="col-sm-3 control-label"></label>
							<div class="col-sm-8">
								<h:inputText value="#{memberSession.user.billingState}" required="false" class="form-control">
									<f:passThroughAttribute name="type" value="text" />
									<f:passThroughAttribute name="v-model" value="billingState" />
									<f:passThroughAttribute name="v-on:keyup" value="showBillingState1Feedback" />
									<f:passThroughAttribute name="placeholder" value="State" />
								</h:inputText>
								<span class="form-control-feedback"><i v-bind:class="billingStateFeedback" aria-hidden="true"></i></span>
							</div>
						</div>
						<div class="form-group has-feedback">
							<label for="billingPostcode" class="col-sm-3 control-label"></label>
							<div class="col-sm-8">
								<h:inputText value="#{memberSession.user.billingPostcode}" required="false" class="form-control">
									<f:passThroughAttribute name="type" value="text" />
									<f:passThroughAttribute name="v-model" value="billingPostcode" />
									<f:passThroughAttribute name="v-on:keyup" value="showBillingPostcode1Feedback" />
									<f:passThroughAttribute name="placeholder" value="Postcode" />
								</h:inputText>
								<span class="form-control-feedback"><i v-bind:class="billingStateFeedback" aria-hidden="true"></i></span>
							</div>
						</div>

						<br />
						<div class="col-sm-8 col-sm-offset-3">
							<c:if test="#{param['success'] == 'true'}">
								<div class="alert alert-success">
									<strong>Successfully changed password.</strong>
								</div>
							</c:if>
						</div>
						<h:commandButton action="#{memberSession.editUser()}"  type="submit" class="btn btn-primary col-sm-offset-5" value="Save Changes">

						</h:commandButton>

					</h:form>
					<br/><br/>

				</div>
			</div>
		</div>
    </ui:define>
    <ui:define name="scripts">
        <h:outputScript library="javascripts" name="register.js" />


    </ui:define>
</ui:composition>
