<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./../WEB-INF/templates/admin.template.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
				xmlns:f="http://xmlns.jcp.org/jsf/core">
	<ui:define name="top"></ui:define>
    <ui:define name="content">

		<div class="page-header">
			<h1>Stock report</h1>
			<br />
		</div>









		<div class="row">
			<div class="form-group">
				<label for="stockCount" class="col-sm-2 control-label">Number in Stock:</label>
				<div class="col-sm-2">
					<h:form>
                        <h:inputText id="stockCount" styleClass="form-control" value="#{catalog.stock}" required="true">
                            <f:passThroughAttribute name="placeholder" value="Max stock number:"/>
                            <f:passThroughAttribute name="type" value="number" />
                            <f:passThroughAttribute name="step" value="1" />
                            <f:passThroughAttribute name="min" value="0" />
							<f:ajax event="change" render="stockReport" />
							<f:ajax event="keyup" delay="300" render="stockReport" />

                        </h:inputText>
					</h:form>
				</div>
			</div>
		</div>


		<h:dataTable value="#{catalog.lowStockBooks()}" var="book" id="stockReport" styleClass="table cart-table">


			<h:column>
				<f:facet name="header">ISBN</f:facet>
					#{book.ISBN}
			</h:column>
			<h:column>
				<f:facet name="header">Title</f:facet>
					#{book.title}
			</h:column>
			<h:column>
				<f:facet name="header">Number In Stock</f:facet>
					#{book.stockLevel}
			</h:column>

		</h:dataTable>
    </ui:define>
</ui:composition>
